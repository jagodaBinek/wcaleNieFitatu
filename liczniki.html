<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>Liczniki</title>

    <link
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
        rel="stylesheet"
    >

    <style>
        body {
            background-color: #f5f7fb;
        }
        .card {
            border-radius: 14px;
        }
        .counter {
            background: #f8fafc;
            padding: 16px;
            border-radius: 12px;
        }
        .value {
            font-size: 1.4rem;
            font-weight: 700;
        }
    </style>
</head>
<body>

<div class="container min-vh-100 d-flex justify-content-center align-items-center">
    <div class="col-12 col-md-6 col-lg-4">

        <div class="card shadow-sm p-4">
            <h4 class="mb-1">Dzienne liczniki</h4>
            <p class="text-muted mb-4">Realizacja celów</p>

            <div id="counters"></div>

            <button class="btn btn-primary w-100 mt-4">
                Dodaj produkt
            </button>
        </div>
    </div>
</div>

<script>
    const goals = JSON.parse(localStorage.getItem("dailyGoals"));

    // Przykładowe aktualne spożycie
    const consumed = {
        water: 1.2,
        calories: 1650,
        protein: 110,
        fat: 82,
        carbs: 190
    };

    const container = document.getElementById("counters");

    function renderCounter(label, unit, goal, value) {
        const diff = goal - value;
        const exceeded = diff < 0;

        return `
            <div class="counter mb-3">
                <div class="d-flex justify-content-between">
                    <div>
                        <div class="text-muted">${label}</div>
                        <div class="value ${exceeded ? 'text-danger' : 'text-success'}">
                            ${exceeded ? '+' : ''}${Math.abs(diff)} ${unit}
                        </div>
                    </div>
                    <span class="badge ${exceeded ? 'bg-danger-subtle text-danger' : 'bg-success-subtle text-success'}">
                        ${exceeded ? 'przekroczono' : 'pozostało'}
                    </span>
                </div>
            </div>
        `;
    }

    if (goals) {
        container.innerHTML =
            renderCounter("Woda", "l", goals.water, consumed.water) +
            renderCounter("Kalorie", "kcal", goals.calories, consumed.calories) +
            renderCounter("Białko", "g", goals.protein, consumed.protein) +
            renderCounter("Tłuszcze", "g", goals.fat, consumed.fat) +
            renderCounter("Węglowodany", "g", goals.carbs, consumed.carbs);
    } else {
        container.innerHTML = `<p class="text-danger">Brak zapisanych celów</p>`;
    }
</script>

</body>
</html>
